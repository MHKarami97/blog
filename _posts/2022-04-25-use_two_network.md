---
title: "استفاده همزمان از 2 شبکه بر روی یک سیستم"
date: 2022-04-25T12:00:00-00:00
categories:
  - Network
tags:
  - trick
  - network
  - router
  - subnetmask
---

فرض کنید اینترنت محل کار شما قطع شده است و توسط آن فقط به موارد داخلش شبکه دسترسی دارید، از طرفی برای انجام کارهای خود نیاز به اینترنت خارج از شرکت هم دارید.  
در این گونه مواقع می‌توانید اینترنت موبایل خود با Hotspot یا Cable با رایانه خود به اشتراک بگذارید و سپس توسط روش زیر از هر دو شبکه استفاده کنید.  

بصورتی که موارد داخلی به همان کارت گرافیک داخلی Route شود و موارد دیگر به کارت شبکه موبایل.  
برای این کار ابتدا با دستور `route print` تنظیمات روتر سیستم را در cmd بیاورید.  
در بخش اول خروجی Interface های شبکه را مشاهده می‌کنید که مشخصات آن دو شبکه که از آن استفاده می‌کنید را باید بخطار داشته باشید.  
بطور مثال در عکس زیر مقدار `3` و `14` مهم است.  
در بخش دوم هم روت‌های فعال سیستم را می‌بینید که چون مقدار Metric شبکه داخلی کمتر و برابر 25 است، درخواست‌ها همیشه به آن فرستاده می‌شود.  
پس در ابتدا ما باید این دو خط را پاک کنیم و خودمان جوری آن را تنظیم کنیم که درخواست‌های شبکه داخلی به روتر دوم و بقیه به روتر اول فرستاده شوند.  

<p align="center" >
  <img src="/assets/img/twoRouter.jpg" alt="mhkarami97" width="600" />
</p>

اکنون نیاز است مقدار `Default Gatway` دو شبکه خود را توسط دستور `ipconfig` بدست آورید تا در کدهای زیر از آن استفاده کنید.  
البته در عکس زیر اشتباه subnet مشخص شده است.  

<p align="center" >
  <img src="/assets/img/twoRouter2.png" alt="mhkarami97" width="600" />
</p>

اکنون کافی است موارد بالا را در کدهای زیر جایگزین کنید و به ترتیب آنها را اجرا کنید.  
دو خط اول یک روت جدید اضافه می‌کند.  
خط سوم دو خط گفته شده در اول مطلب را پاک می‌کند.  
خط آخر نیز مواردی که به شبکه داخلی مربوط است را به مورد گفته شده route می‌‍کند.  

```s
route add 192.0.0.0 mask 255.0.0.0 172.22.2.1 if 3

route add 172.0.0.0 mask 255.0.0.0 172.22.2.1 if 3

route delete 0.0.0.0

route add 0.0.0.0 mask 0.0.0.0 metric 3 192.168.246.144 if 14
```

بعد از قطع کردن اینترنت موبایل هم تمام موارد بالا به حالت اولیه برمی‌گردند.  